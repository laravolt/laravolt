<?php

declare(strict_types=1);

use App\Models\User;
use Illuminate\Foundation\Testing\LazilyRefreshDatabase;
:MODEL_IMPORT:
use Tests\TestCase;

uses(TestCase::class, LazilyRefreshDatabase::class);

beforeEach(function () {
    $this->user = User::factory()->create();
    $this->actingAs($this->user);
});

it('can open index page', function () {
    $this->get(route(':route-url-prefix:.index'))->assertStatus(200);
});

it('can open create page', function () {
    $this->get(route(':route-url-prefix:.create'))->assertStatus(200);
});

it('can store data', function () {
    $attributes = :ModuleName:::factory()->raw();

    $this->post(route(':route-url-prefix:.store'), $attributes)
        ->assertStatus(302)
        ->assertSessionDoesntHaveErrors();
});

it('can open show page', function () {
    $:moduleName: = :ModuleName:::factory()->create();

    $this->get(route(':route-url-prefix:.show', $:moduleName:))->assertStatus(200);
});

it('can open edit page', function () {
    $:moduleName: = :ModuleName:::factory()->create();

    $this->get(route(':route-url-prefix:.edit', $:moduleName:))->assertStatus(200);
});

it('can update data', function () {
    $:moduleName: = :ModuleName:::factory()->create();
    $attributes = $:moduleName:->toArray();
    :TEST_UPDATE_ATTRIBUTES:

    $this->put(route(':route-url-prefix:.update', $:moduleName:), $attributes)
        ->assertStatus(302)
        ->assertSessionDoesntHaveErrors();
});

it('can delete data', function () {
    $:moduleName: = :ModuleName:::factory()->create();

    $this->delete(route(':route-url-prefix:.destroy', $:moduleName:))->assertStatus(302);
});
